<div class="min-h-screen bg-black text-white dark:bg-black dark:text-white">
  <div class="max-w-4xl mx-auto px-4 py-8">
    <!-- Header -->
    <div class="mb-8">
      <h1 class="text-3xl font-bold text-white mb-2">Conference Agenda</h1>
      <p class="text-gray-400">Welcome, <%= @current_user.name %>!</p>
    </div>

    <!-- Flash Messages -->
    <%= render partial: "shared/flash_messages" %>

    <!-- Check-in Section -->
    <div class="bg-gray-900 rounded-lg p-6 mb-8">
      <div class="flex items-center justify-between">
        <div>
          <h2 class="text-xl font-semibold text-white mb-2">Event Check-In</h2>
          <p class="text-gray-400">
            <% if @current_user.checked_in? %>
              âœ… You're checked in! Welcome to Command O Conference.
            <% else %>
              Click the button below to check in to the conference.
            <% end %>
          </p>
        </div>
        <div id="check-in-button">
          <%= render partial: "check_in_button", locals: { user: @current_user } %>
        </div>
      </div>
    </div>

    <!-- Sessions List -->
    <div class="space-y-6">
      <% if @sessions.any? %>
        <% @sessions.each do |session| %>
          <div class="bg-gray-900 rounded-lg p-6 hover:bg-gray-800 transition-colors">
            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between">
              <div class="flex-1">
                <div class="flex items-center space-x-4 mb-2">
                  <span class="text-sm font-medium text-omise-teal">
                    <%= session.start_time.strftime("%I:%M %p") %> - <%= session.end_time.strftime("%I:%M %p") %>
                  </span>
                  <span class="text-sm text-gray-400">
                    <%= session.duration_in_minutes %> minutes
                  </span>
                </div>
                <h3 class="text-xl font-semibold text-white mb-2">
                  <%= link_to session.title, session_path(session), class: "hover:text-omise-teal transition-colors" %>
                </h3>
                <p class="text-gray-400 mb-3">
                  Speaker: <span class="text-white"><%= session.speaker.name %></span>
                </p>
                <% if session.abstract.present? %>
                  <p class="text-gray-300 text-sm line-clamp-2">
                    <%= truncate(session.abstract, length: 150) %>
                  </p>
                <% end %>
              </div>
              <div class="mt-4 sm:mt-0 sm:ml-6">
                <div class="flex flex-col space-y-2">
                  <%= link_to "View Details", session_path(session), 
                        class: "inline-flex items-center px-4 py-2 border border-omise-teal text-sm font-medium rounded-lg text-omise-teal hover:bg-omise-teal hover:text-black transition-colors" %>
                  
                  <% if session.past? && session.can_receive_feedback? %>
                    <% existing_feedback = @current_user.feedbacks.find_by(session: session) %>
                    <% if existing_feedback %>
                      <%= link_to "Edit Feedback", edit_session_feedback_path(session, existing_feedback), 
                            class: "inline-flex items-center px-4 py-2 bg-omise-teal text-sm font-medium rounded-lg text-white hover:bg-omise-teal-dark transition-colors" %>
                    <% else %>
                      <%= link_to "Give Feedback", new_session_feedback_path(session), 
                            class: "inline-flex items-center px-4 py-2 bg-omise-teal text-sm font-medium rounded-lg text-black hover:bg-omise-teal-dark transition-colors" %>
                    <% end %>
                  <% end %>
                </div>
              </div>
            </div>
          </div>
        <% end %>
      <% else %>
        <div class="text-center py-12">
          <div class="text-gray-400 mb-4">
            <svg class="mx-auto h-12 w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
            </svg>
          </div>
          <h3 class="text-lg font-medium text-white mb-2">No sessions scheduled</h3>
          <p class="text-gray-400">Sessions will appear here once they're added to the agenda.</p>
        </div>
      <% end %>
    </div>

    <!-- Overall Event Feedback -->
    <div class="mt-12 text-center">
      <% existing_event_feedback = @current_user.feedbacks.overall_feedback.first %>
      <% if existing_event_feedback %>
        <%= link_to "Edit Overall Event Feedback", edit_event_feedback_path(existing_event_feedback), 
              class: "inline-flex items-center px-6 py-3 bg-omise-teal text-base font-medium rounded-lg text-white hover:bg-omise-teal-dark transition-colors" %>
      <% else %>
        <%= link_to "Overall Event Feedback", new_event_feedback_path, 
              class: "inline-flex items-center px-6 py-3 border border-omise-teal text-base font-medium rounded-lg text-omise-teal hover:bg-omise-teal hover:text-black transition-colors" %>
      <% end %>
    </div>
  </div>
</div>
